<!DOCTYPE html>
<html>
<head>
    <title>Taylor Swift Eras Tour Santa Clara</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f7ecec;
        }

        table {
            margin: 0 auto;
            border-collapse: collapse;
            border: 1px solid #ddd;
        }

        th, td {
            padding: 8px;
            border: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Taylor Swift Eras Tour Santa Clara</h1>
    <table>
        <tr>
            <th>Time Until Concert</th>
            <th>Price</th>
        </tr>
        <tbody id="table-body">
        </tbody>
    </table>
    <script>
        // Set the time of the concert
        const concertTime = new Date("July 28, 2023 18:30:00 PT");

        function updateTimeRemaining() {
            // Get the JSON data
            fetch("ticket_prices.json")
                .then(response => response.json())
                .then(data => {
                    // Update the table
                    const tableBody = document.getElementById("table-body");
                    tableBody.innerHTML = "";
                    for (let i = 0; i < data.length; i++) {
                        const row = document.createElement("tr");

                        // Convert Unix time to a normal date and time
                        const scrapeTime = new Date(data[i].time * 1000);
                        const timeDiff = Math.floor((concertTime - scrapeTime) / 1000);
                        const days = Math.floor(timeDiff / 86400);
                        const hours = Math.floor((timeDiff % 86400) / 3600);
                        const minutes = Math.floor((timeDiff % 3600) / 60);
                        const seconds = timeDiff % 60;

                        const timeRemaining = `${days}d ${hours}h ${minutes}m ${seconds}s`;
                        const price = `$${data[i].price.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,')}`;

                        const timeCell = document.createElement("td");
                        timeCell.textContent = timeRemaining;
                        row.appendChild(timeCell);

                        const priceCell = document.createElement("td");
                        priceCell.textContent = price;
                        row.appendChild(priceCell);

                        tableBody.appendChild(row);
                    }
                });
        }

        // Update the table every 5 seconds
        setInterval(updateTimeRemaining, 5000);
    </script>
</body>
</html>
